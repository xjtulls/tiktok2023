# 背景

## 项目介绍

一句话介绍，实现极简版抖音。每一个应用都是从基础版本逐渐发展迭代过来的，希望同学们能通过实现一个极简版的抖音，来切实实践课程中学到的知识点，如 Go 语言编程，常用框架、数据库、对象存储等内容，同时对开发工作有更多的深入了解与认识，长远讲能对大家的个人技术成长或视野有启发。

## 项目设计要求

极简版抖音项目划分为两大方向，互动方向和社交方向，两个方向均包含基础功能内容，在扩展功能上有所不同，具体内容见下表：

![](/public/feature.png)

### 功能介绍

![](/public/featurepic.png)

## 提交方式

完成代码开发，补全相关文档后，请自行申请一个公开的 Github/Gitlab 仓库，把代码和相关文档提交到该仓库。当然，建议在开发过程中就直接使用 Github/Gitlab 进行团队代码管理，无需等到项目完成后再一次性提交。

## 评分标准

项目主要从功能实现完整度、代码质量、服务性能与安全可靠4个维度进行考核，计算规则如下所示，最终分数为所有评分项之和。

选定项目方向后，如果有余力可以选择完成另外一个方向的内容获得额外加分，根据完成情况最多加20分

![](/public/pingfen.png)


# 项目部署

侧重服务端实现，会提前定义好各个功能对应的接口，同时提供极简版抖音的安装包来支持功能验证和调试，按说明实现接口即可在客户端中看到运行效果。

服务端最基本的结构只需要服务端程序和数据库即可，在本机搭建运行环境。服务端程序连接数据库，响应客户端请求完成对应功能。同时需要根据功能，设计合理的数据模型，并创建对应的数据表，其中用户上传的视频文件可以保存到本地。
数据库可以使用 MySQL：

![](/public/database.png)

对其他数据库或者对象存储有了解的同学也可以根据实际情况选择，不做限制。


## 资料地址：
- 各功能对应的接口说明文档，地址：https://apifox.com/apidoc/shared-09d88f32-0b6c-4157-9d07-a36d32d7a75c
- 极简抖音 APP 包使用说明：https://bytedance.feishu.cn/docs/doccnM9KkBAdyDhg8qaeGlIz7S7
- 服务端 Demo，仓库地址 https://github.com/RaymondCode/simple-demo

## 数据表

- 视频

  ~~~mysql
  message Video {
    required int64 id = 1; // 视频唯一标识
    required User author = 2; // 视频作者信息
    required string play_url = 3; // 视频播放地址
    required string cover_url = 4; // 视频封面地址
    required string title = 8; // 视频标题
    publish_time :发布的时间戳
  }
  ~~~

  用户

  ~~~json
  {
  id:
      name:
      password
      avater
      signature:// 个人简介
      background_image：// 用户个人页顶部大图
  }
  ~~~

  评论

  ~~~json
  {
      id:"自增主键",
      user_id:"评论发布用户id",
      video_id:"评论视频",
      conmment_text:"内容",
      creat_date:"评论发布时间",
      cancel:"1为正常，0为取消"
  }
  ~~~

  点赞表

  ~~~json
  {
  	id:"自增主键",
      user_id:"评论的用户",
      video_id:"被点赞的视频id",
      cancel:"是否取消"
  }
  ~~~

  ~~~mysql
  -- ----------------------------
  -- Table structure for likes
  -- ----------------------------
  DROP TABLE IF EXISTS `likes`;
  CREATE TABLE `likes` (
    `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增主键',
    `user_id` bigint(20) NOT NULL COMMENT '点赞用户id',
    `video_id` bigint(20) NOT NULL COMMENT '被点赞的视频id',
    `cancel` tinyint(4) NOT NULL DEFAULT '0' COMMENT '默认点赞为0，取消赞为1',
    PRIMARY KEY (`id`),
    UNIQUE KEY `userIdtoVideoIdIdx` (`user_id`,`video_id`) USING BTREE,
    KEY `userIdIdx` (`user_id`) USING BTREE,
    KEY `videoIdx` (`video_id`) USING BTREE
  ) ENGINE=InnoDB AUTO_INCREMENT=1229 DEFAULT CHARSET=utf8mb4 COMMENT='点赞表';
  
  -- ----------------------------
  -- Table structure for users
  -- ----------------------------
  DROP TABLE IF EXISTS `users`;
  CREATE TABLE `users` (
    `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '用户id，自增主键',
    `name` varchar(255) NOT NULL COMMENT '用户名',
    `password` varchar(255) NOT NULL COMMENT '用户密码',
     `avatar` varchar(255) NOT NULL COMMENT '用户头像',
      `background_image` varchar(255) NOT NULL COMMENT '用户个人页顶部大图',
      `signature` varchar(255) NOT NULL COMMENT '个人简介',
    PRIMARY KEY (`id`),
    KEY `name_password_idx` (`name`,`password`) USING BTREE
  ) ENGINE=InnoDB AUTO_INCREMENT=20044 DEFAULT CHARSET=utf8mb4 COMMENT='用户表';
  
  
  -- ----------------------------
  -- Table structure for videos
  -- ----------------------------
  DROP TABLE IF EXISTS `videos`;
  CREATE TABLE `videos` (
    `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '自增主键，视频唯一id',
    `author_id` bigint(20) NOT NULL COMMENT '视频作者id',
    `play_url` varchar(255) NOT NULL COMMENT '播放url',
    `cover_url` varchar(255) NOT NULL COMMENT '封面url',
    `publish_time` datetime NOT NULL COMMENT '发布时间戳',
    `title` varchar(255) DEFAULT NULL COMMENT '视频名称',
    PRIMARY KEY (`id`),
    KEY `time` (`publish_time`) USING BTREE,
    KEY `author` (`author_id`) USING BTREE
  ) ENGINE=InnoDB AUTO_INCREMENT=115 DEFAULT CHARSET=utf8mb4 COMMENT='\r\n视频表';
  
  -- ----------------------------
  -- Table structure for comments
  -- ----------------------------
  DROP TABLE IF EXISTS `comments`;
  CREATE TABLE `comments` (
    `id` bigint(20) NOT NULL AUTO_INCREMENT COMMENT '评论id，自增主键',
    `user_id` bigint(20) NOT NULL COMMENT '评论发布用户id',
    `video_id` bigint(20) NOT NULL COMMENT '评论视频id',
    `comment_text` varchar(255) NOT NULL COMMENT '评论内容',
    `create_date` datetime NOT NULL COMMENT '评论发布时间',
    `cancel` tinyint(4) NOT NULL DEFAULT '1' COMMENT '默认评论发布为1，取消后为0',
    PRIMARY KEY (`id`),
    KEY `videoIdIdx` (`video_id`) USING BTREE COMMENT '评论列表使用视频id作为索引-方便查看视频下的评论列表'
  ) ENGINE=InnoDB AUTO_INCREMENT=1206 DEFAULT CHARSET=utf8mb4 COMMENT='评论表';
